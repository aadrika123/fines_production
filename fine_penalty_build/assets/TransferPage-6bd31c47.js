import{r as i,c as j,a as D,e as n,j as I}from"./index-09fb20e5.js";import{A as S}from"./ApiHeader-6d683756.js";import{B}from"./BarLoader-dc753c36.js";import{P as E}from"./ProjectApiList-38ebe721.js";import{A as P}from"./AxiosInterceptors-c9687ad8.js";function q(){const{api_getFreeMenuList:g}=E(),{setmenuList:L,setuserDetails:x}=i.useContext(j),e=D(),[h,o]=i.useState(!1);i.useEffect(()=>{let a=window.localStorage.getItem("token");if(o(!0),a==null){e("/");return}A()},[]);const A=()=>{let a={moduleId:10};P.post(g,a,S()).then(function(t){var l,u,c,r,f,d,m,s;console.log("fetched menu list.....",t),t.data.status==!0?(n("menuList",(u=(l=t==null?void 0:t.data)==null?void 0:l.data)==null?void 0:u.permission),n("userDetails",(r=(c=t==null?void 0:t.data)==null?void 0:c.data)==null?void 0:r.userDetails),L((d=(f=t==null?void 0:t.data)==null?void 0:f.data)==null?void 0:d.permission),x((s=(m=t==null?void 0:t.data)==null?void 0:m.data)==null?void 0:s.userDetails),e("/home")):console.log("false...")}).catch(function(t){console.log("--2--login error...",t)}).finally(()=>o(!1))};if(h)return I.jsx(B,{})}export{q as default};
