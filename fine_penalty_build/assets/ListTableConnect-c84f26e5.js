import{j as t,r as i}from"./index-3aedd10c.js";import{r as L,a as Z}from"./index-8fd19a6e.js";import{c as _,d as $,e as z}from"./index.esm-a9e6ddb4.js";import{c as p}from"./index.esm-89e50849.js";import{A as V}from"./ApiHeader-6d683756.js";import{a as J}from"./ProjectApiList-d84dfb34.js";import{S as ee}from"./ShimmerEffectInline-27494d95.js";function te({filter:e,setFilter:g}){return t.jsxs(t.Fragment,{children:["Search : "," ",t.jsx("input",{className:"border-2 border-gray-600 px-2 bg-gray-200",type:"text",value:e||"",onChange:u=>g(u.target.value)})]})}function ae(e){const[g,u]=i.useState("hidden"),F=i.useMemo(()=>e.columns,[]),x=i.useMemo(()=>e.dataList,[e.dataList,e==null?void 0:e.totalCount]),[r,T]=i.useState(10),[j,S]=i.useState(0);i.useEffect(()=>{S(0)},[e==null?void 0:e.totalCount]),i.useEffect(()=>{let l=(e==null?void 0:e.totalCount)/(e==null?void 0:e.perPage);(e==null?void 0:e.totalCount)%(e==null?void 0:e.perPage)!=0?D(parseInt(l)+1):D(parseInt(l))},[e==null?void 0:e.totalCount,r]);const{getTableBodyProps:h,headerGroups:v,prepareRow:k,setPageSize:D,state:A,rows:E,setGlobalFilter:H}=L.useTable({columns:F,data:x,initialState:{pageIndex:0}},L.useGlobalFilter,L.useSortBy,L.usePagination),{globalFilter:b,pageSize:y}=A,M=()=>{if(parseInt(j)>0&&parseInt(j)<=parseInt(e==null?void 0:e.lastPage))e==null||e.gotoPage(parseInt(j));else return!1},o=()=>{(e==null?void 0:e.lastPage)!=(e==null?void 0:e.currentPage)&&e.nextPage()},m=()=>{(e==null?void 0:e.currentPage)!=1&&e.prevPage()};return t.jsxs(t.Fragment,{children:[(e==null?void 0:e.exportStatus)!==!1&&((e==null?void 0:e.search)==!1?t.jsxs("div",{className:"absolute -mt-[1vh] right-[2.3vw]",children:[t.jsx("div",{className:"flex-initial ml-2",children:t.jsxs("button",{className:"bg-sky-400 px-3 pr-3  shadow-lg rounded py-1 text-white hover:shadow-2xl hover:bg-green-600 text-center relative",onMouseEnter:()=>u(""),onMouseLeave:()=>u("hidden"),onClick:e.exportDataF,children:["Export",t.jsx("div",{className:g+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:t.jsx(_,{})})]})}),t.jsx("div",{className:"flex-1",children:e.children})]}):t.jsxs("div",{className:"flex mb-2 pb-2",children:[t.jsx("div",{className:"flex-initial opacity-50",children:t.jsx(te,{filter:b,setFilter:H})}),t.jsx("div",{className:"flex-initial ml-2",children:t.jsxs("button",{className:"bg-sky-400 px-3 pr-3  shadow-lg rounded py-1 text-white hover:shadow-2xl hover:bg-green-600 text-center relative",onMouseEnter:()=>u(""),onMouseLeave:()=>u("hidden"),onClick:e.exportDataF,children:["Export",t.jsx("div",{className:g+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:t.jsx(_,{})})]})}),t.jsx("div",{className:"flex-1",children:e.children})]})),t.jsx("div",{className:"flex w-full",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"opacity-50",children:"Total Result : "}),t.jsx("span",{className:"font-semibold",children:e==null?void 0:e.totalCount})," "]})}),(e==null?void 0:e.feedback)!=null&&t.jsx("div",{children:t.jsxs("span",{className:"text-xs bg-gray-200 opacity-50 pr-2 pl-1 py-1 rounded-sm",children:[t.jsx(p,{className:"inline text-xs text-gray-400 mr-2"}),e.feedback]})}),t.jsx("div",{className:" p-2 overflow-x-auto bg-white",children:t.jsxs("div",{className:"inline-block min-w-full rounded-lg overflow-hidden bg-white",children:[t.jsxs("table",{...h,className:"min-w-full leading-normal",children:[t.jsx("thead",{className:"font-bold text-left text-sm bg-sky-50",children:v==null?void 0:v.map(l=>t.jsx("tr",{...l.getHeaderGroupProps(),children:l.headers.map(s=>t.jsxs("th",{...s.getHeaderProps(s.getSortByToggleProps()),className:(s==null?void 0:s.className)+" notranslate px-2 py-3 border-b border-gray-200 text-gray-800  text-left text-xs uppercase ",children:[s.render("Header"),t.jsx("span",{children:s.isSorted?s.isSortedDesc?"⬆️":"⬇️":""})]}))}))}),t.jsxs("tbody",{...h(),className:"text-sm",children:[E.map((l,s)=>{var I;return k(l),t.jsx("tr",{...l.getRowProps(),className:"bg-white shadow-lg border-b border-gray-200",children:(I=l==null?void 0:l.cells)==null?void 0:I.map((O,q)=>t.jsx("td",{...O.getCellProps(),className:"notranslate px-2 py-2 text-sm text-left",children:O.render("Cell")}))})}),t.jsx("tr",{children:t.jsx("td",{})})]})]}),t.jsxs("div",{className:"mt-3 grid grid-cols-12 items-center",children:[t.jsxs("div",{className:"sm:col-span-2 col-span-3 flex w-full ml-1 pr-10",children:[t.jsx("span",{children:t.jsx("input",{className:"h-10 w-[90%] placeholder:text-gray-600 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-1 ",type:"number",onChange:l=>{S(l.target.value)},placeholder:"Go to page..."})}),t.jsxs("abbr",{className:"cursor-pointer flex items-center w-[15%] no-underline",title:"Go",onClick:()=>M(),children:[" ",t.jsx("span",{className:"font-bold bg-green-300 text-xl px-2 pb-1 rounded-full hover:text-white hover:bg-green-500",children:"⇨"})," "]})]}),t.jsxs("div",{className:"col-span-2",children:["  ",t.jsx("select",{className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",value:r,onChange:l=>{T(Number(l.target.value)),e.perPageC(Number(l.target.value))},children:[5,10,25,50].map(l=>t.jsxs("option",{selected:l===10,value:l,children:["show ",l]},l))})]}),t.jsxs("div",{className:"col-span-3 sm:col-span-4 text-center sm:col-start-5 col-start-7",children:["   ",t.jsxs("span",{children:["page ","",t.jsxs("strong",{children:[e==null?void 0:e.currentPage," of ",e==null?void 0:e.lastPage]}),""]})]}),t.jsxs("div",{className:"col-span-3 sm:col-span-4 text-right",children:[t.jsx("abbr",{title:"First Page",children:t.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>e==null?void 0:e.goFirst(),disabled:(e==null?void 0:e.currentPage)==1&&!0,children:[t.jsx($,{})," "]})}),t.jsx("abbr",{title:"Previous Page",children:t.jsx("button",{className:((e==null?void 0:e.currentPage)==1?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white cursor-pointer",onClick:()=>m(),disabled:(e==null?void 0:e.currentPage)==1&&!0,children:"⬅️"})}),t.jsx("abbr",{title:"Next Page",children:t.jsx("button",{className:((e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white cursor-pointer",onClick:()=>o(),disabled:(e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)&&!0,children:"➡️"})}),t.jsx("abbr",{title:"Last Page",children:t.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>e==null?void 0:e.goLast(),disabled:(e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)&&!0,children:["  ",t.jsx(z,{})]})})]})]})]})})]})}const xe=e=>{const[g,u]=i.useState(10),[F,x]=i.useState(1),[r,T]=i.useState(0),[j,S]=i.useState(0),[h,v]=i.useState(0),[k,D]=i.useState(),[A,E]=i.useState(!1),[H,b]=i.useState(!1),[y,M]=i.useState([]),[o,m]=i.useState(!1),l=()=>{b(!1),m(!0),Object.keys(e==null?void 0:e.requestBody).length!==0&&typeof e.loader=="function"&&e.loader(!0),J.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:g,page:F},V()).then(a=>{var d,c,f,B,N,n,R,P,w,C;((d=a==null?void 0:a.data)==null?void 0:d.status)==!0?(console.log("success getting list => ",a),e!=null&&e.getData&&(e==null||e.allData((c=a==null?void 0:a.data)==null?void 0:c.data)),M((B=(f=a==null?void 0:a.data)==null?void 0:f.data)==null?void 0:B.data),v((n=(N=a==null?void 0:a.data)==null?void 0:N.data)==null?void 0:n.total),T((P=(R=a==null?void 0:a.data)==null?void 0:R.data)==null?void 0:P.current_page),S((C=(w=a==null?void 0:a.data)==null?void 0:w.data)==null?void 0:C.last_page),b(!1)):(console.log("false error while getting list => ",a),b(!0))}).catch(a=>(console.log("error while getting list => ",a),b(!0))).finally(()=>{m(!1),Object.keys(e==null?void 0:e.requestBody).length!==0&&typeof e.loader=="function"&&e.loader(!1),b(!1)})},s=()=>{x(r+1)},I=()=>{x(r-1)},O=a=>{let d=parseInt(h/a),c=parseInt(h%a);if(c==0){d<r&&x(d),u(a);return}if(c!=0){d+1<r&&x(d+1),u(a);return}},q=()=>{x(1)},K=()=>{x(j)},Q=a=>{x(a)},U=a=>a==null?void 0:a.map((c,f)=>{var N;const B=(N=e==null?void 0:e.columns)==null?void 0:N.map((n,R)=>{var w,C;var P=c[n==null?void 0:n.accessor];if(n!=null&&n.option&&((w=n==null?void 0:n.option)==null?void 0:w.length)>0){const G=(C=n==null?void 0:n.option)==null?void 0:C.find(Y=>Y.hasOwnProperty(c[n==null?void 0:n.accessor]));G?P=G[c[n==null?void 0:n.accessor]]:P=c[n==null?void 0:n.accessor]}return(n==null?void 0:n.Header.toLowerCase())!="action"&&{[n==null?void 0:n.Header]:n!=null&&n.accessor?P:f+1}});return Object.assign({},...B)}),W=()=>{m(!0),E(!1),J.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:h},V()).then(a=>{var d,c,f;((d=a==null?void 0:a.data)==null?void 0:d.status)==!0&&(D(U((f=(c=a==null?void 0:a.data)==null?void 0:c.data)==null?void 0:f.data)),X()),m(!1)}).catch(a=>{m(!1)})},X=()=>{E(!0)};return i.useEffect(()=>{(e==null?void 0:e.requestBody)!=null&&(x(1),u(10),l())},[e==null?void 0:e.changeData]),i.useEffect(()=>{m(!0),l()},[F,g]),t.jsxs(t.Fragment,{children:[H&&t.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[t.jsx("strong",{className:"font-bold",children:"Sorry! "}),t.jsx("span",{className:"block sm:inline",children:"Some error occured while fetching list. Please try again later."}),t.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]}),A&&t.jsx(Z,{data:k}),o&&t.jsx(ee,{}),!o&&(y==null?void 0:y.length)>0?t.jsx(t.Fragment,{children:t.jsx(ae,{search:e==null?void 0:e.search,currentPage:r,lastPage:j,goFirst:q,goLast:K,count1:h,columns:e==null?void 0:e.columns,dataList:y,exportStatus:e==null?void 0:e.exportStatus,perPage:g,perPageC:O,totalCount:h,nextPage:s,prevPage:I,exportDataF:W,exportData:k,gotoPage:a=>Q(a)})}):t.jsx(t.Fragment,{children:!o&&t.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[t.jsx("span",{className:"block sm:inline",children:"Oops! No data available."}),t.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]})})]})};export{xe as L};
